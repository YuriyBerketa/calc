{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const calculator = document.querySelector('.calculator');\nlet history = [];\nlet tempNumber = '';\nlet operationType = '';\nlet isPercent = false;\nlet isEqual = false;\n\ncalculator.addEventListener('click', event => {\n  const target = event.target;\n  if (target.classList.contains('calculator__col')) {\n    const data = target.dataset.type;\n    operationTypeHandling(data);\n    renderTotal(tempNumber);\n    renderHistory(history);\n  }\n});\n\nfunction operationTypeHandling(data) {\n  if (data >= 0) {\n    operationType = 'number';\n    tempNumber = tempNumber === '0' ? data : tempNumber + data;\n  } else if (data === 'float') {\n    operationType = 'number';\n    if (!/\\./.test(tempNumber)) {\n      if (tempNumber) {\n      tempNumber = tempNumber + '.';\n    } else {\n      tempNumber = '0.';\n    }\n    } \n  } else if (data === 'delete' && operationType === 'number') {\n    tempNumber = tempNumber.substring(0, tempNumber.length - 1);\n    tempNumber = tempNumber ? tempNumber : '0';\n    isPercent = false;\n  } else if (['+', '-', '*', '/'].includes(data) && tempNumber) {\n    operationType = data;\n    history.push(tempNumber, operationType);\n    tempNumber = '';\n    isPercent = false;\n  } else if (data === 'clear') {\n    history = [];\n    tempNumber = '0';\n    isPercent = false;\n  } else if (data === '%') {\n    history.push(tempNumber);\n      isPercent = true;\n      isEqual = false;\n      tempNumber = calculate(history, isPercent, isEqual);\n  } else if (data === '=') {\n    if (!isPercent) {\n      history.push(tempNumber);\n    }\n      isEqual = true;\n      tempNumber = calculate(history, isPercent, isEqual);\n      history = [];\n      isPercent = false;\n  }\n//  else if (data === '%') {\n//       operationType = data;\n//       tempNumber = calculate(history);\n//   }\n}\n\nfunction renderTotal(value) {\n  const totalEl = calculator.querySelector('.calculator__total');\n  totalEl.innerHTML = value;\n}\n\nfunction renderHistory(historyArr) {\n  const historyEl = calculator.querySelector('.calculator__history');\n  let htmlEl = '';\n\n  historyArr.forEach(item => {\n    if (item >= 0) {\n      htmlEl = htmlEl + `&nbsp;<span>${item}</span>`;\n    } else if (['+', '-', '*', '/', '%'].includes(item)) {\n        item = item === '*' ? '×' : item === '/' ? '÷' : item;\n      htmlEl = htmlEl + `&nbsp;<strong>${item}</strong>`;\n    }\n  });\n  historyEl.innerHTML = htmlEl;\n}\n\nfunction calculate(historyArr, isPercent, isEqual) {\n  let total = 0;\n  historyArr.forEach((item, indx) => {\n    item = parseFloat(item);\n    if (indx === 0) {\n      total = item;\n    } else if (indx - 2 >= 0 && isPercent && indx - 2 === historyArr.length - 3) {\n      if (!isEqual) {\n        const x = total;\n        const operation = historyArr[indx-1];\n        const n = item;\n        total = calculatePercent(x, operation, n);\n      } else {\n        const x = total;\n        const operation = historyArr[indx-1];\n        const n = item; \n        total = calculatePercentWhenPuschEqual(x, operation, n);\n        console.log(x, operation, n)\n      }\n    }\n    else if (indx - 2 >= 0) {\n      const prevItem = historyArr[indx - 1];\n      if (item >= 0) {\n        if (prevItem === '+') {\n          total = total + item;\n        } else if (prevItem === '-') {\n          total = total - item;\n        } else if (prevItem === '*') {\n          total = total * item;\n        } else if (prevItem === '/') {\n          total = total / item;\n        } else if (prevItem === '%') {\n            total = total / 100 * item;\n        }\n      }\n    }\n  });\n  // console.log(total);\n  return String(total);\n}\n\n\n// логика процентов на калькуляторе\n//пересчет процента при нажатии %\nfunction calculatePercent(x, operation, n) {\n  let total\n  if (['+', '-'].includes(operation)) {\n   total = x * (n / 100);\n  } else if (['*', '/'].includes(operation)) {\n    total = n / 100;\n  }\n  console.log(total);\n  return total;\n}\n\n//пересчет % при нажатии на =, после нажатия %\nfunction calculatePercentWhenPuschEqual(x, operation, n) {\n  let total = 0;\n  console.log(x, operation, n)\n  if (operation === '+') {\n    total = x + (n / 100 * x);\n  } else if (operation === '-') {\n    total = x - (n / 100 * x);\n  } else if(operation === '*') {\n    total = x * (n / 100);\n    console.log(total)\n  }\n  console.log(total)\n  return total\n}\n\n//переключение темі\nconst dayFill = document.querySelector('.theme-day');\nconst nightFill = document.querySelector('.theme-night');\n\n\nconst theme = document.querySelector('.theme');\ntheme.addEventListener('click', () => {\n  if (theme.classList.contains('theme_dark')) {\n    theme.classList.remove('theme_dark');\n    nightFill.style.fill = '#fafafa';\n    dayFill.style.fill = '#00223A';\n    calculator.classList.add('calculator_dark')\n  } else {\n    theme.classList.add('theme_dark');\n    calculator.classList.remove('calculator_dark')\n    nightFill.style.fill = 'transparent';\n    dayFill.style.fill = '#00223A';\n    // theme.style.fill = 'transparent';\n  }\n})"],"names":["$b8f9b7833fa37166$var$calculator","document","querySelector","$b8f9b7833fa37166$var$history","$b8f9b7833fa37166$var$tempNumber","$b8f9b7833fa37166$var$operationType","$b8f9b7833fa37166$var$isPercent","$b8f9b7833fa37166$var$calculate","historyArr","isPercent1","isEqual1","total","forEach","item","indx","parseFloat","length","x1","operation1","n1","x","operation","n","console","log","$b8f9b7833fa37166$var$calculatePercentWhenPuschEqual","includes","$b8f9b7833fa37166$var$calculatePercent","prevItem","String","addEventListener","event","historyEl","htmlEl","value","target","classList","contains","data","test","substring","push","$b8f9b7833fa37166$var$operationTypeHandling","dataset","type","innerHTML","concat","$b8f9b7833fa37166$var$dayFill","$b8f9b7833fa37166$var$nightFill","$b8f9b7833fa37166$var$theme","remove","style","fill","add"],"version":3,"file":"index.e4db6045.js.map"}