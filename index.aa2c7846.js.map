{"mappings":"AAAA,MAAMA,EAAaC,SAASC,cAAc,eAC1C,IAAIC,EAAU,GACVC,EAAa,GACbC,EAAgB,GAChBC,GAAY,EACZC,GAAU,EA0Ed,SAASC,EAAUC,EAAYC,EAAWC,GACxC,IAAIC,EAAQ,EAyBZ,OAxBAH,EAAWI,SAAQ,CAACC,EAAMC,KAExB,GADAD,EAAOE,WAAWF,GACL,IAATC,EACFH,EAAQE,OACH,GAAIC,EAAO,GAAK,GAAKL,GAAaK,IAASN,EAAWQ,OAAS,QAGjE,GAAIF,EAAO,GAAK,EAAG,CACtB,MAAMG,EAAWT,EAAWM,EAAO,GAC/BD,GAAQ,IACO,MAAbI,EACFN,GAAgBE,EACM,MAAbI,EACTN,GAAgBE,EACM,MAAbI,EACTN,GAAgBE,EACM,MAAbI,EACTN,GAAgBE,EACM,MAAbI,IACPN,EAAQA,EAAQ,IAAME,G,KAKzBF,C,CAlGTZ,EAAWmB,iBAAiB,SAASC,IACnC,MAAMC,EAASD,EAAMC,OACrB,GAAIA,EAAOC,UAAUC,SAAS,mBAAoB,EAQpD,SAA+BC,GACzBA,GAAQ,GACVnB,EAAgB,SAChBD,EAA4B,MAAfA,EAAqBoB,EAAOpB,EAAaoB,GACpC,UAATA,GACTnB,EAAgB,SACZ,KAAKoB,KAAKrB,KACHA,EACTA,GAA0B,IAE1BA,EAAa,OAEG,WAAToB,GAAuC,WAAlBnB,GAC9BD,EAAaA,EAAWsB,UAAU,EAAGtB,EAAWa,OAAS,GACzDb,EAAaA,GAA0B,KAC9B,CAAC,IAAK,IAAK,IAAK,IAAK,KAAKuB,SAASH,IAASpB,GACrDC,EAAgBmB,EAChBrB,EAAQyB,KAAKxB,EAAYC,GACzBD,EAAa,IACK,UAAToB,GACTrB,EAAU,GACVC,EAAa,KACK,MAAToB,GACPlB,GAAY,EACZC,GAAU,EACZJ,EAAQyB,KAAKxB,GACbA,EAAaI,EAAUL,EAASG,EAAWC,GAC3CJ,EAAU,IACQ,MAATqB,IACPrB,EAAQyB,KAAKxB,GACbG,GAAU,EAEZH,EAAaI,EAAUL,EAASG,EAAWC,GACzCJ,EAAU,GACVG,GAAY,E,CAxCduB,CADaR,EAAOS,QAAQC,MAiDXC,EA/CL5B,EAgDEJ,EAAWE,cAAc,sBACjC+B,UAAYD,EAGtB,SAAuBvB,GACrB,MAAMyB,EAAYlC,EAAWE,cAAc,wBAC3C,IAAIiC,EAAS,GAEb1B,EAAWI,SAAQC,IACbA,GAAQ,EACVqB,GAAkB,eAAerB,WACxB,CAAC,IAAK,IAAK,IAAK,IAAK,KAAKa,SAASb,KAE1CqB,GAAgB,iBADhBrB,EAAgB,MAATA,EAAe,IAAgB,MAATA,EAAe,IAAOA,a,IAIzDoB,EAAUD,UAAYE,C,CA/DpBC,CAAcjC,E,CA8ClB,IAAqB6B,C","sources":["src/index.js"],"sourcesContent":["const calculator = document.querySelector('.calculator');\nlet history = [];\nlet tempNumber = '';\nlet operationType = '';\nlet isPercent = false;\nlet isEqual = false;\n\ncalculator.addEventListener('click', event => {\n  const target = event.target;\n  if (target.classList.contains('calculator__col')) {\n    const data = target.dataset.type;\n    operationTypeHandling(data);\n    renderTotal(tempNumber);\n    renderHistory(history);\n  }\n});\n\nfunction operationTypeHandling(data) {\n  if (data >= 0) {\n    operationType = 'number';\n    tempNumber = tempNumber === '0' ? data : tempNumber + data;\n  } else if (data === 'float') {\n    operationType = 'number';\n    if (/\\./.test(tempNumber)) {\n    } else if (tempNumber) {\n      tempNumber = tempNumber + '.';\n    } else {\n      tempNumber = '0.';\n    }\n  } else if (data === 'delete' && operationType === 'number') {\n    tempNumber = tempNumber.substring(0, tempNumber.length - 1);\n    tempNumber = tempNumber ? tempNumber : '0';\n  } else if (['+', '-', '*', '/', '%'].includes(data) && tempNumber) {\n    operationType = data;\n    history.push(tempNumber, operationType);\n    tempNumber = '';\n  } else if (data === 'clear') {\n    history = [];\n    tempNumber = '0';\n  } else if (data === '%') {\n      isPercent = true;\n      isEqual = false;\n    history.push(tempNumber);\n    tempNumber = calculate(history, isPercent, isEqual);\n    history = [];\n  } else if (data === '=') {\n      history.push(tempNumber);\n      isEqual = true;\n    //   isPercent = false;\n    tempNumber = calculate(history, isPercent, isEqual);\n      history = [];\n      isPercent = false;\n  }\n//  else if (data === '%') {\n//       operationType = data;\n//       tempNumber = calculate(history);\n//   }\n}\n\nfunction renderTotal(value) {\n  const totalEl = calculator.querySelector('.calculator__total');\n  totalEl.innerHTML = value;\n}\n\nfunction renderHistory(historyArr) {\n  const historyEl = calculator.querySelector('.calculator__history');\n  let htmlEl = '';\n\n  historyArr.forEach(item => {\n    if (item >= 0) {\n      htmlEl = htmlEl + `&nbsp;<span>${item}</span>`;\n    } else if (['+', '-', '*', '/', '%'].includes(item)) {\n        item = item === '*' ? '×' : item === '/' ? '÷' : item;\n      htmlEl = htmlEl + `&nbsp;<strong>${item}</strong>`;\n    }\n  });\n  historyEl.innerHTML = htmlEl;\n}\n\nfunction calculate(historyArr, isPercent, isEqual) {\n  let total = 0;\n  historyArr.forEach((item, indx) => {\n    item = parseFloat(item);\n    if (indx === 0) {\n      total = item;\n    } else if (indx - 2 >= 0 && isPercent && indx === historyArr.length - 3) {\n        \n    }\n    else if (indx - 2 >= 0) {\n      const prevItem = historyArr[indx - 1];\n      if (item >= 0) {\n        if (prevItem === '+') {\n          total = total + item;\n        } else if (prevItem === '-') {\n          total = total - item;\n        } else if (prevItem === '*') {\n          total = total * item;\n        } else if (prevItem === '/') {\n          total = total / item;\n        } else if (prevItem === '%') {\n            total = total / 100 * item;\n        }\n      }\n    }\n  });\n  return total;\n}\n\n\n// логика процентов на калькуляторе\n"],"names":["$1f0dc3b9307be026$var$calculator","document","querySelector","$1f0dc3b9307be026$var$history","$1f0dc3b9307be026$var$tempNumber","$1f0dc3b9307be026$var$operationType","$1f0dc3b9307be026$var$isPercent","$1f0dc3b9307be026$var$isEqual","$1f0dc3b9307be026$var$calculate","historyArr","isPercent1","isEqual","total","forEach","item","indx","parseFloat","length","prevItem","addEventListener","event","target","classList","contains","data","test","substring","includes","push","$1f0dc3b9307be026$var$operationTypeHandling","dataset","type","value","innerHTML","historyEl","htmlEl","$1f0dc3b9307be026$var$renderHistory"],"version":3,"file":"index.aa2c7846.js.map"}